tags:
  - Users
summary: Remove a story from the current user's saved list
operationId: removeSavedStoryForMe
description: Delete a story from the authenticated user's saved list (idempotent)
security:
  - bearerAuth: []

parameters:
  - name: storyId
    in: path
    required: true
    schema:
      type: string
      pattern: '^[a-f0-9]{24}$'
    description: Mongo ObjectId of the story to remove

responses:
  '200':
    description: Story removed from saved (idempotent)
    content:
      application/json:
        schema:
          type: object
          required: [status, message, data]
          properties:
            status: { type: integer, example: 200 }
            message: { type: string, example: Story removed from saved }
            data:
              type: object
              required: [user]
              properties:
                user:
                  type: object
                  required: [savedStories]
                  properties:
                    savedStories:
                      type: array
                      items:
                        type: string
                        pattern: '^[a-f0-9]{24}$'
        examples:
          removed:
            value:
              status: 200
              message: Story removed from saved
              data:
                user:
                  savedStories:
                    - '68498236a100312bea079008'
                    - '68498236a100312bea07902c'
                    - '68498236a100312bea079018'
          already-removed:
            value:
              status: 200
              message: Story was not in saved
              data:
                user:
                  savedStories:
                    - '68498236a100312bea079008'
                    - '68498236a100312bea07902c'
                    - '68498236a100312bea079018'

  '400':
    description: Bad request (invalid storyId)
    content:
      application/json:
        schema:
          type: object
          required: [status, message]
          properties:
            status: { type: integer, example: 400 }
            message: { type: string, example: Invalid storyId }
            data:
              type: object
              properties:
                details:
                  type: array
                  items: { type: string }
        examples:
          invalid-storyid:
            value:
              status: 400
              message: Invalid storyId
              data:
                details:
                  - '"storyId" must match /^[a-f0-9]{24}$/'

  '401':
    description: Unauthorized (missing/invalid token or session)
    content:
      application/json:
        schema:
          type: object
          required: [status, message]
          properties:
            status: { type: integer, example: 401 }
            message: { type: string, example: Session not found or invalid token }
            data:
              type: object
              properties:
                details:
                  type: array
                  items: { type: string }
        examples:
          no-token:
            value:
              status: 401
              message: Unauthorized
              data:
                details: ['Missing access token']
          invalid-token:
            value:
              status: 401
              message: Session not found or invalid token
              data:
                details: ['Invalid or expired token']

  '404':
    description: Story not found
    content:
      application/json:
        schema:
          type: object
          required: [status, message]
          properties:
            status: { type: integer, example: 404 }
            message: { type: string, example: Story not found }
            data:
              type: object
              properties:
                details:
                  type: array
                  items: { type: string }
        examples:
          not-found:
            value:
              status: 404
              message: Story not found
              data:
                details:
                  - "Story with given id doesn't exist"

  '500':
    description: Internal Server Error
    content:
      application/json:
        schema:
          type: object
          required: [status, message, data]
          properties:
            status: { type: integer, example: 500 }
            message: { type: string, example: Something went wrong }
            data:
              type: object
              example: { message: Unexpected error }
