tags:
  - Stories
summary: Create a new story
operationId: createStory
description: Create a new travel story with title, article content, category and optional cover image. Requires authentication.
security:
  - bearerAuth: []
requestBody:
  required: true
  content:
    multipart/form-data:
      schema:
        type: object
        required:
          - title
          - article
          - category
        properties:
          title:
            type: string
            maxLength: 80
            description: Story title (max 80 characters)
            example: Моя подорож до Італії
          article:
            type: string
            maxLength: 2500
            description: Story article/content (max 2500 characters)
            example: Це був незабутній день у Римі...
          category:
            type: string
            pattern: '^[a-f0-9]{24}$'
            description: Category ID (MongoDB ObjectId)
            example: 672a5fe1c31a4c67fdfb12f9
          imageUrl:
            type: string
            format: binary
            description: Optional. Story cover image file (JPG, PNG, WebP)

responses:
  '201':
    description: Story successfully created
    content:
      application/json:
        schema:
          type: object
          required: [status, message, data]
          properties:
            status:
              type: integer
              example: 201
            message:
              type: string
              example: Story successfully created
            data:
              $ref: '../../components/schemas/story.yaml'
        examples:
          success:
            value:
              status: 201
              message: Story successfully created
              data:
                _id: 672b6cfea9f43a5e8f9f21a2
                imageUrl: https://example.com/images/story.jpg
                title: Моя подорож до Італії
                article: Це був незабутній день у Римі...
                category:
                  _id: 672a5fe1c31a4c67fdfb12f9
                  name: Travel
                ownerId:
                  _id: 671f8a22b5e9a8e4c1d7f9b3
                  name: John Doe
                  avatarUrl: https://example.com/avatars/john.jpg
                publishedDate: 2025-11-13T10:00:00.000Z
                favoritesCount: 0
                createdAt: 2025-11-13T10:00:00.000Z
                updatedAt: 2025-11-13T10:00:00.000Z

  '400':
    description: Invalid story data or file upload
    content:
      application/json:
        schema:
          type: object
          required: [status, message, data]
          properties:
            status:
              type: integer
              example: 400
            message:
              type: string
              example: BadRequestError
            data:
              type: object
              example:
                name: BadRequestError
                message: Invalid request body
                details:
                  - Title is required and must not exceed 80 characters
                  - Article is required and must not exceed 2500 characters
                  - Category must be a valid MongoDB ObjectId

  '401':
    $ref: '../../components/responses/401.yaml'
  '500':
    $ref: '../../components/responses/500.yaml'
